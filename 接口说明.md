### 系统接口说明

#### 1. 前端页面接口

> 服务启动入口文件http://127.0.0.1:8000/

#### 1.1 用户登录

- 两个测试用户

  | 用户名   | 用户密码 | 用户等级 |
  | -------- | -------- | -------- |
  | nuocheng | nuocheng | 高级用户 |
  | xiaoming | xiaoming | 普通用户 |

- 登录api接口说明

    | 请求路由 | 请求方式 | 提交的参数                      | 返回数据                                                     |
    | -------- | -------- | ------------------------------- | ------------------------------------------------------------ |
    | /login/  | post     | username:用户名；password：密码 | {"message":登录提示,"flag":用户等级,"code":0,"token":Token,"username":用户名,"id":用户ID} |



#### 1.2 辅助系统

- 1.2.1 获取用户历史提交参数

    | 请求路由           | 请求方式 | 提交参数 | 返回数据                                                     |
    | ------------------ | -------- | -------- | ------------------------------------------------------------ |
    | /get_user_keyword/ | get      | 无       | {"info":{info=[{  "id":ID,"keyword":JSON参数,    "create_at":创建时间}]}} |

- 1.2.2 用户删除历史提交参数

  | 请求路由           | 请求参数 | 提交方式 | 返回数据                                                     |
  | ------------------ | -------- | -------- | ------------------------------------------------------------ |
  | /del_user_keyword/ | kid:ID   | get      | {"info":{info=[{"id":ID,"keyword":JSON参数,    "create_at":创建时间}]}} |

- 1.2.3 用户参数提交

    | 请求路由           | 请求参数                 | 提交方式 | 返回数据                                                     |
    | ------------------ | ------------------------ | -------- | ------------------------------------------------------------ |
    | /add_user_keyword/ | keyword:JSON格式的关键词 | post     | {"info":{info=[{ "id":ID,"keyword":JSON参数,    "create_at":创建时间}]}} |

    > 后期模型加入后会生成图片，需要在前端配置图片变量，并绑定src属性进行渲染



#### 1.3 主要系统

- 1.3.1 json格式文件上传

  | 请求路由           | 请求参数              | 提交方式 | 返回数据                                                     |
  | ------------------ | --------------------- | -------- | ------------------------------------------------------------ |
  | /update_file_user/ | {"file":json格式文件} | post     | {"data":json文件内容,"fileid":文件存储ID,"flag":判断json格式是否正确标识} |

- 1.3.2 json数据修改并修改json格式文件

  > 核心内容，该部分代码需要配置好模型，将返回的数据需要在数据库中进行保存

  | 请求路由                | 请求参数                                         | 提交方式 | 返回数据                                                     |
  | ----------------------- | ------------------------------------------------ | -------- | ------------------------------------------------------------ |
  | /users_update_data_run/ | 'context':json格式字符串， 'fileid':修改的文件ID | post     | {"data":[{    "id":item.pk,    "username":用户姓名,    "fileid_name":上传的文件名称,    "output_file":生成的文件名称}]} |



#### 1.4 用户对数据管理系统（只针对高级用户设置）

- 1.4.1 获取高级用户生成的文件下的对应文件

  | 请求路由             | 请求参数 | 提交方式 | 返回数据                                                     |
  | -------------------- | -------- | -------- | ------------------------------------------------------------ |
  | /users_run_all_data/ | 无       | get      | {"data":[ {    "id": ID,    "username": 用户名称,    "fileid_name": 上传或修改文件名称,    "output_file": 输出文件的名称}]} |

  

- 1.4.2 高级用户查看数据信息，并进行数据可视化

  > 这部分的返回数据可以针对前端需要的字段进行改进

  | 请求路由         | 请求参数         | 提交方式 | 返回数据                                            |
  | ---------------- | ---------------- | -------- | --------------------------------------------------- |
  | /users_run_data/ | id：输出文件的ID | get      | {"data":数据文件里的数据,"figure":用于可视化的数据} |

- 1.4.3 高级用户对数据文件进行删除

  | 请求路由          | 请求参数      | 提交方式 | 返回数据                                                     |
  | ----------------- | ------------- | -------- | ------------------------------------------------------------ |
  | /users_deal_data/ | id:文件数据ID | get      | {"data":[ {"id": ID, "username": 用户名称, "fileid_name": 上传或修改文件名称,"output_file": 输出文件的名称}]} |

- 1.4.4 高级用户对数据进行下载功能

  | 请求路由              | 请求参数            | 提交方式 | 返回数据              |
  | --------------------- | ------------------- | -------- | --------------------- |
  | /users_download_data/ | id:需要下载的文件ID | get      | {"file":文件请求地址} |

  

#### 2. 后台管理系统

> 后期开发可能需要的
>
> 服务启动入口文件http://127.0.0.1:8000/backstage/

#### 2.1 管理员的登录

| 请求路由    | 请求参数                                      | 提交方式 | 返回数据                             |
| ----------- | --------------------------------------------- | -------- | ------------------------------------ |
| login_user/ | {username:管理员名称,password:管理员登录密码} | post     | {"message":是否登录成功,"flag":标识} |



#### 2.2 管理员对用户管理

| 请求路由                   | 请求参数                                         | 功能               | 提交方式 | 返回数据                               |
| -------------------------- | ------------------------------------------------ | ------------------ | -------- | -------------------------------------- |
| /                          | 无                                               | 查看所有用户信息   | get      | 返回用户的信息，字段名称见数据库       |
| /                          | {name:用户名称，password:用户密码,stat:用户身份} | 添加用户           | post     | 返回添加后的用户信息，字段名称见数据库 |
| userinfodetial/(?P<pk>\d+) | {pk:用户ID}                                      | 查看某个用户信息   | get      | 返回查询的用户信息                     |
| userinfodetial/(?P<pk>\d+) | {pk:用户ID}                                      | 修改某个用户的信息 | put      | 返回修改后用户的信息                   |
| userinfodetial/(?P<pk>\d+) | {pk:用户ID}                                      | 删除谋个用户的信息 | delete   | 无                                     |



#### 2.3 管理员对辅助系统管理

| 请求路由               | 请求参数                             | 功能                   | 提交方式 | 返回数据                   |
| ---------------------- | ------------------------------------ | ---------------------- | -------- | -------------------------- |
| input_file/            | 无                                   | 获取用户提交的所有文件 | get      | 用户上传文件的所有文件信息 |
| input_file/            | {userid:用户ID,inputfile:上传的文件} | 为某个用户上传一个文件 | post     | 添加的相关信息             |
| input_file/(?P<pk>\d+) | {pk:ID}                              | 查看上传文件的信息     | get      | 有关该文件的相关内容       |
| input_file/(?P<pk>\d+) | {pk:ID}                              | 修改                   | put      | 返回修改后的信息           |
| input_file/(?P<pk>\d+) | {pk:ID}                              | 删除                   | delete   | 无                         |



#### 2.4管理员对主系统的管理

| 请求路由                | 请求参数 | 功能           | 提交方式 | 返回数据               |
| ----------------------- | -------- | -------------- | -------- | ---------------------- |
| output_file/            | 无       | 获取输出文件   | get      | 获取输出文件的相关信息 |
| output_file/(?P<pk>\d+) | {pk:id}  | 删除输出的文件 | delete   | 无                     |



